-- Kill Aura Tele Sau L∆∞ng + Danh S√°ch + Unknown (Random)

local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer
local RunService = game:GetService("RunService")

local KillAura = false
local SelectedPlayer = nil -- nil = Unknown / Random

-- GUI
local gui = Instance.new("ScreenGui", game.CoreGui)
gui.Name = "KillAuraGUI"

-- Kill Aura Button
local btn = Instance.new("TextButton", gui)
btn.Size = UDim2.new(0, 160, 0, 50)
btn.Position = UDim2.new(0, 20, 0.5, -25)
btn.Text = "Kill Aura: OFF"
btn.BackgroundColor3 = Color3.fromRGB(200, 0, 0)
btn.TextScaled = true
btn.Active = false
btn.Draggable = false

-- List Button
local listBtn = Instance.new("TextButton", gui)
listBtn.Size = UDim2.new(0, 160, 0, 40)
listBtn.Position = UDim2.new(0, 20, 0.5, 35)
listBtn.Text = "Target: Unknown"
listBtn.TextScaled = true
listBtn.BackgroundColor3 = Color3.fromRGB(60, 60, 60)
listBtn.Active = false
listBtn.Draggable = false

-- Player List
local listFrame = Instance.new("ScrollingFrame", gui)
listFrame.Size = UDim2.new(0, 160, 0, 200)
listFrame.Position = UDim2.new(0, 20, 0.5, 80)
listFrame.BackgroundColor3 = Color3.fromRGB(25, 25, 25)
listFrame.Visible = false
listFrame.CanvasSize = UDim2.new(0,0,0,0)
listFrame.BorderSizePixel = 0

local layout = Instance.new("UIListLayout", listFrame)
layout.Padding = UDim.new(0,5)

-- Toggle Kill Aura
btn.MouseButton1Click:Connect(function()
	KillAura = not KillAura
	btn.Text = KillAura and "Kill Aura: ON" or "Kill Aura: OFF"
	btn.BackgroundColor3 = KillAura and Color3.fromRGB(0,200,0) or Color3.fromRGB(200,0,0)
end)

-- Toggle List
listBtn.MouseButton1Click:Connect(function()
	listFrame.Visible = not listFrame.Visible
end)

-- Refresh Player List
local function RefreshPlayerList()
	for _,v in ipairs(listFrame:GetChildren()) do
		if v:IsA("TextButton") then v:Destroy() end
	end

	-- üîπ UNKNOWN BUTTON
	local unknownBtn = Instance.new("TextButton", listFrame)
	unknownBtn.Size = UDim2.new(1,-10,0,30)
	unknownBtn.Text = "Unknown (Random)"
	unknownBtn.TextScaled = true
	unknownBtn.BackgroundColor3 = Color3.fromRGB(120,120,120)

	unknownBtn.MouseButton1Click:Connect(function()
		SelectedPlayer = nil
		listBtn.Text = "Target: Unknown"
		listFrame.Visible = false
	end)

	-- Player Buttons
	for _,plr in ipairs(Players:GetPlayers()) do
		if plr ~= LocalPlayer then
			local pBtn = Instance.new("TextButton", listFrame)
			pBtn.Size = UDim2.new(1,-10,0,30)
			pBtn.Text = plr.Name
			pBtn.TextScaled = true
			pBtn.BackgroundColor3 = Color3.fromRGB(80,80,80)

			pBtn.MouseButton1Click:Connect(function()
				SelectedPlayer = plr
				listBtn.Text = "Target: "..plr.Name
				listFrame.Visible = false
			end)
		end
	end

	task.wait()
	listFrame.CanvasSize = UDim2.new(0,0,0,layout.AbsoluteContentSize.Y + 10)
end

RefreshPlayerList()
Players.PlayerAdded:Connect(RefreshPlayerList)
Players.PlayerRemoving:Connect(RefreshPlayerList)

-- Kill Aura Loop
RunService.Heartbeat:Connect(function()
	if not KillAura then return end
	if not LocalPlayer.Character then return end

	local hrp = LocalPlayer.Character:FindFirstChild("HumanoidRootPart")
	if not hrp then return end

	local targets = {}

	for _,plr in ipairs(Players:GetPlayers()) do
		if plr ~= LocalPlayer and plr.Character then
			local hum = plr.Character:FindFirstChild("Humanoid")
			local ehrp = plr.Character:FindFirstChild("HumanoidRootPart")
			if hum and ehrp and hum.Health > 0 then
				table.insert(targets, plr)
			end
		end
	end

	if #targets == 0 then return end

	local target
	if SelectedPlayer and table.find(targets, SelectedPlayer) then
		target = SelectedPlayer
	else
		target = targets[math.random(#targets)]
	end

	-- Tele sau l∆∞ng
	hrp.CFrame = target.Character.HumanoidRootPart.CFrame * CFrame.new(0,0,2)

	-- ƒê√°nh
	local tool = LocalPlayer.Character:FindFirstChildOfClass("Tool")
	if tool then pcall(function() tool:Activate() end) end
end)
